(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{21:function(n,e,t){},27:function(n,e,t){"use strict";t.r(e);var r,i,a,c,o,l,u,s,d,h,p,b,f=t(0),g=t.n(f),j=t(12),m=t.n(j),O=(t(21),t(2)),x=t(4),v=t(3),y=v.a.button(r||(r=Object(O.a)(["\n  color: #fff;\n  text-transform: uppercase;\n  text-decoration: none;\n  background: none rgba(255, 255, 255, 0.2);\n  padding: 8px;\n  border: none;\n  border-radius: 4px;\n  display: inline-block;\n  transition: all 0.4s ease 0s;\n  margin-bottom: 5px;\n  &:hover {\n    background: none rgba(255, 255, 255, 0.4);\n    transition: all 0.4s ease 0s;\n    cursor: pointer;\n  }\n"]))),k=t(1),S=function(n){var e=n.coordinates,t=n.handleHover,r=n.handleClick,i=n.handleRightClick,a=n.isHovering,c=n.ship,o=n.hit,l=n.ai;return Object(k.jsx)(w,{id:e,onMouseEnter:t,onClick:r,isHovering:a,ship:c,hit:o,onContextMenu:i,ai:l})},w=v.a.div(i||(i=Object(O.a)(["\n  border: 1px solid white;\n  border-radius: 4px;\n  height: auto;\n  background: ",";\n  transition: all 0.8s ease;\n  &:hover {\n    cursor: crosshair;\n  }\n"])),(function(n){return function(n){return n.isHovering&&n.isHovering.includes(n.id)?"pink":n.ship&&n.hit?"red":!n.ai&&n.ship?"pink":n.hit?"grey":"#df645f"}(n)})),C=function(n){var e=n.grid.map((function(e,t){return e.map((function(e,r){return Object(k.jsx)(S,{coordinates:"".concat(t).concat(r),handleClick:n.clickFunction,ship:!!e.ship,hit:!!e.hit,ai:n.ai},"".concat(t).concat(r))}))}));return Object(k.jsxs)("div",{children:[Object(k.jsx)("h2",{children:n.playerTitle}),Object(k.jsx)(H,{children:e})]})},H=v.a.div(a||(a=Object(O.a)(["\n  width: 400px;\n  height: 400px;\n  display: grid;\n  grid-template-columns: repeat(10, 10%);\n  margin: 10px 20px 10px 0px;\n"]))),P=function(){var n=Object(f.useState)(!1),e=Object(x.a)(n,2),t=e[0],r=e[1];return Object(k.jsxs)(T,{children:[Object(k.jsx)("h1",{children:"Battleships"}),Object(k.jsx)("p",{children:"The classic battleships game from when you were a kid (or maybe you still enjoy it?)"}),Object(k.jsxs)(y,{onClick:function(){r((function(n){return!n}))},children:[t?"hide":"show"," instructions"]}),t&&Object(k.jsxs)(f.Fragment,{children:[Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Placing ships:"})," select a ship by clicking on it. Rotate the ship by right clicking inside the grid. Left click to place."]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Attacking ships:"})," select an empty cell on your opponent's grid to attack it. If you hit, you get another turn!"]})]})]})},T=v.a.div(c||(c=Object(O.a)(["\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),A=function(n){var e=n.grid,t=(n.placingShip,n.isHovering),r=n.handleHover,i=n.handleClick,a=n.handleRightClick,c=e.map((function(n,e){return n.map((function(n,c){return Object(k.jsx)(S,{cellID:"".concat(e).concat(c),coordinates:"".concat(e).concat(c),isHovering:t,handleHover:r,handleClick:i,handleRightClick:a,ship:!!n.ship},"".concat(e).concat(c))}))}));return Object(k.jsx)("div",{children:Object(k.jsx)(H,{children:c})})},R=t(16),z=function(n){var e=n.ships,t=n.handleClick,r=n.playerOneRandomPlacement,i=n.startGame,a=n.allShipsPlaced;return Object(k.jsxs)(E,{children:[Object(k.jsx)(y,{onClick:r,children:"Random Placement"}),a&&Object(k.jsx)(y,{onClick:i,children:"Start Game"}),function(){var n;return e.length>0&&(n=e.map((function(n){return Object(k.jsxs)(F,{children:[Object(k.jsx)("div",{children:n.name}),Object(k.jsx)(M,{id:n.name,onClick:t,children:(e=n.length,Object(R.a)(Array(e)).map((function(n,e){return Object(k.jsx)(B,{},e)})))})]},n.name);var e}))),n}()]})},F=v.a.div(o||(o=Object(O.a)(["\n  margin-bottom: 10px;\n"]))),M=v.a.div(l||(l=Object(O.a)(["\n  width: 40px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: repeat(5, 100%);\n  grid-auto-columns: min-content;\n"]))),B=v.a.div(u||(u=Object(O.a)(["\n  border: 1px solid white;\n  border-radius: 4px;\n  height: auto;\n  background: pink;\n  &:hover {\n    cursor: pointer;\n  }\n"]))),E=v.a.div(s||(s=Object(O.a)(["\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n"]))),I=t(28),N=function(n,e){switch(e.type){case"placed ship":return n.filter((function(n){return n.name!==e.name}));case"randomly placed":return{};case"reset ships":return I.playerOne.board.shipsToPlace;default:throw new Error("oops")}};var G=function(){var n=Object(f.useState)(I.playerOne.board.grid),e=Object(x.a)(n,2),t=e[0],r=e[1],i=Object(f.useState)(I.playerTwo.board.grid),a=Object(x.a)(i,2),c=a[0],o=a[1],l=Object(f.useState)(!0),u=Object(x.a)(l,2),s=u[0],d=u[1],h=Object(f.useReducer)(N,I.playerOne.board.shipsToPlace),p=Object(x.a)(h,2),b=p[0],g=p[1],j=Object(f.useState)(null),m=Object(x.a)(j,2),O=m[0],v=m[1],S=Object(f.useState)(null),w=Object(x.a)(S,2),H=w[0],T=w[1],R=Object(f.useState)(!1),F=Object(x.a)(R,2),M=F[0],B=F[1],E=Object(f.useState)(!1),G=Object(x.a)(E,2),L=G[0],Y=G[1],q=Object(f.useState)(!1),K=Object(x.a)(q,2),Q=K[0],V=K[1],X=Object(f.useState)(null),Z=Object(x.a)(X,2),$=Z[0],_=Z[1];Object(f.useEffect)((function(){0===b.length&&B(!0)}),[b]);var nn=function(){var n=I.winCondition();n&&(_("".concat(n," wins!")),V(!0)),n=null};return Object(k.jsx)(D,{children:Object(k.jsxs)(J,{children:[Object(k.jsx)(P,{}),!L&&Object(k.jsxs)(U,{children:[Object(k.jsx)(A,{grid:t,placingShip:O,isHovering:H,handleHover:function(n){if(O){var e=[],t=parseInt(n.target.id);if(O.horizontal)for(var r=0;r<O.length;r+=1){var i=n.target.id[0],a=parseInt("".concat(i,"9"));t+O.length>a&&(t=a-O.length+1);var c=t+r;c<10&&(c="0"+c),e.push(c.toString())}else for(var o=0;o<O.length;o+=1){var l=n.target.id[1],u=parseInt("9".concat(l));t+10*O.length>u&&(t=u-10*O.length+10);var s=t+10*o;s<10&&(s="0"+s),e.push(s.toString())}T((function(n){return e}))}},handleClick:function(n){if(O&&n.target.id>="00"&&n.target.id<="99"){var e=Number(n.target.id[0]),t=Number(n.target.id[1]);I.playerOne.board.placeUserShip(O,e,t)&&(r(I.playerOne.board.grid),g({type:"placed ship",name:O.name}),v(null),T(!1))}},handleRightClick:function(n){n.preventDefault(),O&&n.target.id>="00"&&n.target.id<="99"&&O.rotate()}}),s&&Object(k.jsx)(z,{ships:b,handleClick:function(n){var e=b.filter((function(e){return e.name===n.target.parentNode.id}));v((function(n){return e[0]}))},playerOneRandomPlacement:function(){I.playerOne.board.clearShipsFromBoard(),I.playerOne.board.randomShipPlacement(),r(I.playerOne.board.grid),B(!0),T(!1),v(null),g({type:"randomly placed"})},startGame:function(){Y(!0),B(!1)},allShipsPlaced:M})]}),L&&Object(k.jsxs)(W,{children:[Object(k.jsx)(C,{grid:t,playerTitle:"Your board"}),Object(k.jsx)(C,{clickFunction:function(n){var e=Number(n.target.id[0]),t=Number(n.target.id[1]);if(!c[e][t].hit){var i=I.playerOne.attack(I.playerTwo.board,e,t);o(I.playerTwo.board.grid),i.checkHit?nn():(I.changeTurn(),nn(),r(I.playerOne.board.grid))}},grid:c,ai:!0,playerTitle:"Enemy's board"})]}),Q&&Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{children:$}),Object(k.jsx)(y,{onClick:function(){Y(!1),V(!1),_(null),r(I.playerOne.board.grid),o(I.playerTwo.board.grid),d(!0),I.resetWinner(),g({type:"reset ships"})},children:"Play again"})]})]})})},D=v.a.div(d||(d=Object(O.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]))),J=v.a.div(h||(h=Object(O.a)(["\n  width: 600px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),U=v.a.div(p||(p=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  border-radius: 8px;\n  background: #df645f;\n  width: 800px;\n"]))),W=v.a.div(b||(b=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  border-radius: 8px;\n  background: #df645f;\n  width: 1200px;\n"])));m.a.render(Object(k.jsx)(g.a.StrictMode,{children:Object(k.jsx)(G,{})}),document.getElementById("root"))},28:function(n,e,t){"use strict";t.r(e);var r=t(5),i=function(){return{x:Math.floor(10*Math.random()),y:Math.floor(10*Math.random())}},a=function(n,e){var t=!1,r=!0,a=Array(e).fill(!1),c=function(){a.every((function(n){return!0===n}))&&(t=!0)},o=function(){r=!r};return{name:n,length:e,hit:function(n){n<=a.length&&(a[n]=!0),c()},rotate:o,randomOrientation:function(){for(var n=i().x,e=0;e<n;e+=1)o()},get sunk(){return t},get hits(){return a},get horizontal(){return r}}},c=function(){var n,e=[],t=[{name:"destroyer",length:2},{name:"submarine",length:3},{name:"cruiser",length:3},{name:"battleship",length:4},{name:"carrier",length:5}],c=[],o=function(){var n={ship:!1,hit:!1};(e=new Array(10)).fill(n,0);for(var t=0;t<e.length;t+=1)e[t]=new Array(10),e[t].fill(n,0)},l=function(){return t.map((function(n){return a(n.name,n.length)}))},u=function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(e){for(var a=!0,c={x:0,y:0};a;)c=i(),!0===n.horizontal?c.y=d(n.length,c.y):c.x=d(n.length,c.x),a=s(n.length,n.horizontal,c.x,c.y);return c}var o={row:t,column:r};if(!0===n.horizontal?o.column=d(n.length,o.column):o.row=d(n.length,o.row),!s(n.length,n.horizontal,o.row,o.column))return o},s=function(n,t,r,i){if(t){for(var a=0;a<n;a+=1)if(e[r][i+a].ship)return!0;return!1}for(var c=0;c<n;c+=1)if(e[r+c][i].ship)return!0;return!1},d=function(n,e){return e+n>9?e=9-n+1:e},h=function(n,t,i){return e.map((function(e,a){return e.map((function(e,c){return a===n&&c>=t&&c<t+i.length?Object(r.a)(Object(r.a)({},e),{},{ship:{name:i.name,index:c-t}}):e}))}))},p=function(n,t,i){return e.map((function(e,a){return e.map((function(e,c){return c===t&&a>=n&&a<n+i.length?Object(r.a)(Object(r.a)({},e),{},{ship:{name:i.name,index:a-n}}):e}))}))},b=function(n,t,r){var i=[];i=n.horizontal?h(t,r,n):p(t,r,n),e=i};return o(),c=l(),n=l(),{get grid(){return e},get ships(){return c},get shipsToPlace(){return n},buildGrid:o,buildShips:l,resetShips:function(){return c=l()},clearShipsFromBoard:function(){return o()},randomShipPlacement:function(){c.forEach((function(n){n.randomOrientation();var e=u(n,true),t=e.x,r=e.y;b(n,t,r)}))},placeShip:b,placeUserShip:function(n,t,r){var i=[],a=u(n,!1,t,r);return!!a&&(i=n.horizontal?h(a.row,a.column,n):p(a.row,a.column,n),e=i,!0)},receiveAttack:function(n,t){if(!e[n][t].hit){if(!1!==e[n][t].ship&&!1===e[n][t].hit){var i=e[n][t].ship;(a=i.name,c.find((function(n){return n.name===a}))).hit(i.index)}var a,o=e.map((function(e,i){return e.map((function(e,a){return i===n&&a===t?Object(r.a)(Object(r.a)({},e),{},{hit:!0}):e}))}));return e=o,!!function(n,t){if(!1!==e[n][t].ship&&!0===e[n][t].hit)return!0}(n,t)}},checkAllShipsSunk:function(){return!!c.every((function(n){return!0===n.sunk}))}}},o=function(n){var e=n,t=c();e&&t.randomShipPlacement();var r=function(n,e,t){return{x:e,y:t,checkHit:n.receiveAttack(e,t)}},a=function n(e){var t=i(),a=t.x,c=t.y;return!0===e.grid[a][c].hit&&n(e),r(e,a,c)};return{get board(){return t},attack:function(n,t,i){return!0===e?a(n):r(n,t,i)}}},l=function(){var n=o(),e=o(!0),t=!1,r=null,i=!0,a=function(){n.board.clearShipsFromBoard(),e.board.clearShipsFromBoard(),n.board.resetShips(),e.board.resetShips(),e.board.randomShipPlacement()},c=function(){if(i){if(e.board.checkAllShipsSunk())return t=!0,r="player one",a(),r}else if(n.board.checkAllShipsSunk())return t=!0,r="player two",a(),r;return!1};return{get playerOne(){return n},get playerTwo(){return e},get gameOver(){return t},changeTurn:function t(){var r=!0;if(!(i=!i)){for(;r;){e.attack(n.board).checkHit||(r=!1),c()&&(r=!1)}t()}},winCondition:c,resetWinner:function(){r=null}}}();e.default=l}},[[27,1,2]]]);
//# sourceMappingURL=main.e04c0a0a.chunk.js.map