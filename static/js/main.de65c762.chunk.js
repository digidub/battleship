(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{21:function(n,e,t){},27:function(n,e,t){"use strict";t.r(e);var r,i,a,c,o,l,u,s,d,h,p,b,f=t(0),g=t.n(f),j=t(12),m=t.n(j),O=(t(21),t(2)),x=t(4),v=t(3),y=v.a.button(r||(r=Object(O.a)(["\n  color: #fff;\n  text-transform: uppercase;\n  text-decoration: none;\n  background: none rgba(255, 255, 255, 0.2);\n  padding: 8px;\n  border: none;\n  border-radius: 4px;\n  display: inline-block;\n  transition: all 0.4s ease 0s;\n  margin-bottom: 5px;\n  &:hover {\n    background: none rgba(255, 255, 255, 0.4);\n    transition: all 0.4s ease 0s;\n    cursor: pointer;\n  }\n"]))),k=t(1),S=function(n){var e=n.coordinates,t=n.handleHover,r=n.handleClick,i=n.handleRightClick,a=n.isHovering,c=n.ship,o=n.hit,l=n.ai;return Object(k.jsx)(w,{id:e,onMouseEnter:t,onClick:r,isHovering:a,ship:c,hit:o,onContextMenu:i,ai:l})},w=v.a.div(i||(i=Object(O.a)(["\n  border: 1px solid white;\n  border-radius: 4px;\n  height: auto;\n  background: ",";\n  transition: all 0.8s ease;\n  &:hover {\n    cursor: crosshair;\n  }\n"])),(function(n){return function(n){return n.isHovering&&n.isHovering.includes(n.id)?"pink":n.ship&&n.hit?"red":!n.ai&&n.ship?"pink":n.hit?"grey":"#df645f"}(n)})),C=function(n){var e=n.grid.map((function(e,t){return e.map((function(e,r){return Object(k.jsx)(S,{coordinates:"".concat(t).concat(r),handleClick:n.clickFunction,ship:!!e.ship,hit:!!e.hit,ai:n.ai},"".concat(t).concat(r))}))}));return Object(k.jsxs)("div",{children:[Object(k.jsx)("h2",{children:n.playerTitle}),Object(k.jsx)(H,{children:e})]})},H=v.a.div(a||(a=Object(O.a)(["\n  width: 400px;\n  height: 400px;\n  display: grid;\n  grid-template-columns: repeat(10, 10%);\n  margin: 10px 20px 10px 0px;\n"]))),P=function(){var n=Object(f.useState)(!1),e=Object(x.a)(n,2),t=e[0],r=e[1];return Object(k.jsxs)(T,{children:[Object(k.jsx)("h1",{children:"Battleships"}),Object(k.jsx)("p",{children:"The classic battleships game from when you were a kid (or maybe you still enjoy it?)"}),Object(k.jsxs)(y,{onClick:function(){r((function(n){return!n}))},children:[t?"hide":"show"," instructions"]}),t&&Object(k.jsxs)(f.Fragment,{children:[Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Placing ships:"})," select a ship by clicking on it. Rotate the ship by right clicking inside the grid. Left click to place."]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Attacking ships:"})," select an empty cell on your opponent's grid to attack it. If you hit, you get another turn!"]})]})]})},T=v.a.div(c||(c=Object(O.a)(["\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),A=function(n){var e=n.grid,t=(n.placingShip,n.isHovering),r=n.handleHover,i=n.handleClick,a=n.handleRightClick,c=e.map((function(n,e){return n.map((function(n,c){return Object(k.jsx)(S,{cellID:"".concat(e).concat(c),coordinates:"".concat(e).concat(c),isHovering:t,handleHover:r,handleClick:i,handleRightClick:a,ship:!!n.ship},"".concat(e).concat(c))}))}));return Object(k.jsx)("div",{children:Object(k.jsx)(H,{children:c})})},R=t(16),z=function(n){var e=n.ships,t=n.handleClick,r=n.playerOneRandomPlacement,i=n.startGame,a=n.allShipsPlaced;return Object(k.jsxs)(E,{children:[Object(k.jsx)(y,{onClick:r,children:"Random Placement"}),a&&Object(k.jsx)(y,{onClick:i,children:"Start Game"}),function(){var n;return e.length>0&&(n=e.map((function(n){return Object(k.jsxs)(F,{children:[Object(k.jsx)("div",{children:n.name}),Object(k.jsx)(M,{id:n.name,onClick:t,children:(e=n.length,Object(R.a)(Array(e)).map((function(n,e){return Object(k.jsx)(B,{},e)})))})]},n.name);var e}))),n}()]})},F=v.a.div(o||(o=Object(O.a)(["\n  margin-bottom: 10px;\n"]))),M=v.a.div(l||(l=Object(O.a)(["\n  width: 40px;\n  height: 40px;\n  display: grid;\n  grid-template-columns: repeat(5, 100%);\n  grid-auto-columns: min-content;\n"]))),B=v.a.div(u||(u=Object(O.a)(["\n  border: 1px solid white;\n  border-radius: 4px;\n  height: auto;\n  background: pink;\n  &:hover {\n    cursor: pointer;\n  }\n"]))),E=v.a.div(s||(s=Object(O.a)(["\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n"]))),I=t(5),N=function(){return{x:Math.floor(10*Math.random()),y:Math.floor(10*Math.random())}},G=function(n,e){var t=!1,r=!0,i=Array(e).fill(!1),a=function(){i.every((function(n){return!0===n}))&&(t=!0)},c=function(){r=!r};return{name:n,length:e,hit:function(n){n<=i.length&&(i[n]=!0),a()},rotate:c,randomOrientation:function(){for(var n=N().x,e=0;e<n;e+=1)c()},get sunk(){return t},get hits(){return i},get horizontal(){return r}}},D=function(){var n,e=[],t=[{name:"destroyer",length:2},{name:"submarine",length:3},{name:"cruiser",length:3},{name:"battleship",length:4},{name:"carrier",length:5}],r=[],i=function(){var n={ship:!1,hit:!1};(e=new Array(10)).fill(n,0);for(var t=0;t<e.length;t+=1)e[t]=new Array(10),e[t].fill(n,0)},a=function(){return t.map((function(n){return G(n.name,n.length)}))},c=function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(e){for(var i=!0,a={x:0,y:0};i;)a=N(),!0===n.horizontal?a.y=l(n.length,a.y):a.x=l(n.length,a.x),i=o(n.length,n.horizontal,a.x,a.y);return a}var c={row:t,column:r};if(!0===n.horizontal?c.column=l(n.length,c.column):c.row=l(n.length,c.row),!o(n.length,n.horizontal,c.row,c.column))return c},o=function(n,t,r,i){if(t){for(var a=0;a<n;a+=1)if(e[r][i+a].ship)return!0;return!1}for(var c=0;c<n;c+=1)if(e[r+c][i].ship)return!0;return!1},l=function(n,e){return e+n>9?e=9-n+1:e},u=function(n,t,r){return e.map((function(e,i){return e.map((function(e,a){return i===n&&a>=t&&a<t+r.length?Object(I.a)(Object(I.a)({},e),{},{ship:{name:r.name,index:a-t}}):e}))}))},s=function(n,t,r){return e.map((function(e,i){return e.map((function(e,a){return a===t&&i>=n&&i<n+r.length?Object(I.a)(Object(I.a)({},e),{},{ship:{name:r.name,index:i-n}}):e}))}))},d=function(n,t,r){var i=[];i=n.horizontal?u(t,r,n):s(t,r,n),e=i};return i(),r=a(),n=a(),{get grid(){return e},get ships(){return r},get shipsToPlace(){return n},buildGrid:i,buildShips:a,resetShips:function(){return r=a()},clearShipsFromBoard:function(){return i()},randomShipPlacement:function(){r.forEach((function(n){n.randomOrientation();var e=c(n,true),t=e.x,r=e.y;d(n,t,r)}))},placeShip:d,placeUserShip:function(n,t,r){var i=[],a=c(n,!1,t,r);return!!a&&(i=n.horizontal?u(a.row,a.column,n):s(a.row,a.column,n),e=i,!0)},receiveAttack:function(n,t){if(!e[n][t].hit){if(!1!==e[n][t].ship&&!1===e[n][t].hit){var i=e[n][t].ship;(a=i.name,r.find((function(n){return n.name===a}))).hit(i.index)}var a,c=e.map((function(e,r){return e.map((function(e,i){return r===n&&i===t?Object(I.a)(Object(I.a)({},e),{},{hit:!0}):e}))}));return e=c,!!function(n,t){if(!1!==e[n][t].ship&&!0===e[n][t].hit)return!0}(n,t)}},checkAllShipsSunk:function(){return!!r.every((function(n){return!0===n.sunk}))}}},J=function(n){var e=n,t=D();e&&t.randomShipPlacement();var r=function(n,e,t){return{x:e,y:t,checkHit:n.receiveAttack(e,t)}},i=function n(e){var t=N(),i=t.x,a=t.y;return!0===e.grid[i][a].hit&&n(e),r(e,i,a)};return{get board(){return t},attack:function(n,t,a){return!0===e?i(n):r(n,t,a)}}},U=function(){var n=J(),e=J(!0),t=!1,r=null,i=!0,a=function(){n.board.clearShipsFromBoard(),e.board.clearShipsFromBoard(),n.board.resetShips(),e.board.resetShips(),e.board.randomShipPlacement()},c=function(){if(i){if(e.board.checkAllShipsSunk())return t=!0,r="player one",a(),r}else if(n.board.checkAllShipsSunk())return t=!0,r="player two",a(),r;return!1};return{get playerOne(){return n},get playerTwo(){return e},get gameOver(){return t},changeTurn:function t(){var r=!0;if(!(i=!i)){for(;r;){e.attack(n.board).checkHit||(r=!1),c()&&(r=!1)}t()}},winCondition:c,resetWinner:function(){r=null}}}(),W=function(n,e){switch(e.type){case"placed ship":return n.filter((function(n){return n.name!==e.name}));case"randomly placed":return{};case"reset ships":return U.playerOne.board.shipsToPlace;default:throw new Error("oops")}};var L=function(){var n=Object(f.useState)(U.playerOne.board.grid),e=Object(x.a)(n,2),t=e[0],r=e[1],i=Object(f.useState)(U.playerTwo.board.grid),a=Object(x.a)(i,2),c=a[0],o=a[1],l=Object(f.useState)(!0),u=Object(x.a)(l,2),s=u[0],d=u[1],h=Object(f.useReducer)(W,U.playerOne.board.shipsToPlace),p=Object(x.a)(h,2),b=p[0],g=p[1],j=Object(f.useState)(null),m=Object(x.a)(j,2),O=m[0],v=m[1],S=Object(f.useState)(null),w=Object(x.a)(S,2),H=w[0],T=w[1],R=Object(f.useState)(!1),F=Object(x.a)(R,2),M=F[0],B=F[1],E=Object(f.useState)(!1),I=Object(x.a)(E,2),N=I[0],G=I[1],D=Object(f.useState)(!1),J=Object(x.a)(D,2),L=J[0],V=J[1],X=Object(f.useState)(null),Z=Object(x.a)(X,2),$=Z[0],_=Z[1];Object(f.useEffect)((function(){0===b.length&&B(!0)}),[b]);var nn=function(){var n=U.winCondition();n&&(_("".concat(n," wins!")),V(!0)),n=null};return Object(k.jsx)(Y,{children:Object(k.jsxs)(q,{children:[Object(k.jsx)(P,{}),!N&&Object(k.jsxs)(K,{children:[Object(k.jsx)(A,{grid:t,placingShip:O,isHovering:H,handleHover:function(n){if(O){var e=[],t=parseInt(n.target.id);if(O.horizontal)for(var r=0;r<O.length;r+=1){var i=n.target.id[0],a=parseInt("".concat(i,"9"));t+O.length>a&&(t=a-O.length+1);var c=t+r;c<10&&(c="0"+c),e.push(c.toString())}else for(var o=0;o<O.length;o+=1){var l=n.target.id[1],u=parseInt("9".concat(l));t+10*O.length>u&&(t=u-10*O.length+10);var s=t+10*o;s<10&&(s="0"+s),e.push(s.toString())}T((function(n){return e}))}},handleClick:function(n){if(O&&n.target.id>="00"&&n.target.id<="99"){var e=Number(n.target.id[0]),t=Number(n.target.id[1]);U.playerOne.board.placeUserShip(O,e,t)&&(r(U.playerOne.board.grid),g({type:"placed ship",name:O.name}),v(null),T(!1))}},handleRightClick:function(n){n.preventDefault(),O&&n.target.id>="00"&&n.target.id<="99"&&O.rotate()}}),s&&Object(k.jsx)(z,{ships:b,handleClick:function(n){var e=b.filter((function(e){return e.name===n.target.parentNode.id}));v((function(n){return e[0]}))},playerOneRandomPlacement:function(){U.playerOne.board.clearShipsFromBoard(),U.playerOne.board.randomShipPlacement(),r(U.playerOne.board.grid),B(!0),T(!1),v(null),g({type:"randomly placed"})},startGame:function(){G(!0),B(!1)},allShipsPlaced:M})]}),N&&Object(k.jsxs)(Q,{children:[Object(k.jsx)(C,{grid:t,playerTitle:"Your board"}),Object(k.jsx)(C,{clickFunction:function(n){var e=Number(n.target.id[0]),t=Number(n.target.id[1]);if(!c[e][t].hit){var i=U.playerOne.attack(U.playerTwo.board,e,t);o(U.playerTwo.board.grid),i.checkHit?nn():(U.changeTurn(),nn(),r(U.playerOne.board.grid))}},grid:c,ai:!0,playerTitle:"Enemy's board"})]}),L&&Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{children:$}),Object(k.jsx)(y,{onClick:function(){G(!1),V(!1),_(null),r(U.playerOne.board.grid),o(U.playerTwo.board.grid),d(!0),U.resetWinner(),g({type:"reset ships"})},children:"Play again"})]})]})})},Y=v.a.div(d||(d=Object(O.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]))),q=v.a.div(h||(h=Object(O.a)(["\n  width: 600px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),K=v.a.div(p||(p=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  border-radius: 8px;\n  background: #df645f;\n  width: 800px;\n"]))),Q=v.a.div(b||(b=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  border-radius: 8px;\n  background: #df645f;\n  width: 1200px;\n"])));m.a.render(Object(k.jsx)(g.a.StrictMode,{children:Object(k.jsx)(L,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.de65c762.chunk.js.map